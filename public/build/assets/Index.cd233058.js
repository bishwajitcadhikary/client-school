import{c as i,w as a,b as S,o as l,d as r,V as w,av as e,g as o,aw as y,ax as D,Y as _,f as c,l as d,m as h,D as p,bi as N,n as z,k as C,ay as A,H as B,i as F,a1 as v,aK as I,u as T}from"./app.ff209ba5.js";import{_ as L}from"./Pagination.dd8e4fd9.js";import{_ as j}from"./DataNotFound.305c8e67.js";import{V as E}from"./VTable.b696833b.js";import{V as f}from"./VTooltip.06926fcc.js";import{V as P}from"./VContainer.70025531.js";import"./VCol.196fcba1.js";/* empty css              */import"./VRow.1d74aad8.js";const x=e("th",null,"#",-1),H={class:"text-center"},K={class:"text-center"},O={class:"text-center",width:"15%"},Y={width:"5%"},q=["href"],G={class:"text-center"},J={class:"text-center"},M={class:"text-center"},ot={__name:"Index",props:{schools:{type:Object,default:null}},setup(u){v("currencyFormat");const V=v("dateFormat"),b=t=>{I.Inertia.post(route("customer.schools.database-creation-retry",{school:t}),{},{preserveState:!0,preserveScroll:!0,onSuccess:m=>{T().showNotification(m)}})};return(t,m)=>{const g=S("AppLayout");return l(),i(g,{title:t.$t("Schools"),actions:[{title:t.$t("New School"),href:t.route("customer.schools.create"),icon:"mdi-plus"}]},{default:a(()=>[r(P,null,{default:a(()=>[r(w,null,{default:a(()=>[u.schools.data.length?(l(),i(E,{key:0},{default:a(()=>[e("thead",null,[e("tr",null,[x,e("th",null,o(t.$t("School Name")),1),e("th",null,o(t.$t("Domain")),1),e("th",H,o(t.$t("Database")),1),e("th",K,o(t.$t("Status")),1),e("th",null,o(t.$t("Created At")),1),e("th",O,o(t.$t("Actions")),1)])]),e("tbody",null,[(l(!0),y(B,null,D(u.schools.data,(s,k)=>(l(),y("tr",{key:k},[e("td",Y,o(k+1),1),e("td",null,o(s.name),1),e("td",null,[e("a",{href:"https://"+s.domain,target:"_blank"},o(s.domain),9,q)]),e("td",G,[s.database_created==1?(l(),i(_,{key:0,class:"ma-2",color:"primary"},{default:a(()=>[c(o(t.$t("Created")),1)]),_:1})):d("",!0),r(f,{text:t.$t("Click to refresh")},{activator:a(({props:n})=>[s.database_created==0?(l(),i(h,p({key:0,class:"ma-2",color:"secondary",rounded:"",size:"small"},n,{onClick:m[0]||(m[0]=$=>t.$inertia.reload())}),{default:a(()=>[c(o(t.$t("Creating"))+" ",1),r(N,{class:"ml-3",width:3,size:"x-small",color:"red",indeterminate:""})]),_:2},1040)):d("",!0)]),_:2},1032,["text"]),r(f,{text:t.$t("Click to retry")},{activator:a(({props:n})=>[s.database_created==2?(l(),i(h,p({key:0,class:"ma-2 text-white",color:"error",rounded:"",size:"small"},n,{onClick:$=>b(s.id)}),{default:a(()=>[c(o(t.$t("Failed"))+" ",1),r(z,null,{default:a(()=>[c("mdi-reload")]),_:1})]),_:2},1040,["onClick"])):d("",!0)]),_:2},1032,["text"])]),e("td",J,[s.is_active?(l(),i(_,{key:0,class:"ma-2",color:"primary"},{default:a(()=>[c(o(t.$t("Active")),1)]),_:1})):d("",!0),s.is_active?d("",!0):(l(),i(_,{key:1,class:"ma-2",color:"secondary"},{default:a(()=>[c(o(t.$t("Inactive")),1)]),_:1}))]),e("td",null,o(C(V)(s.created_at)),1),e("td",M,[r(f,{text:t.$t("Edit School")},{activator:a(({props:n})=>[r(h,p({variant:"plain",size:"small",icon:"mdi-clipboard-edit-outline"},n,{onClick:$=>t.$inertia.visit(t.route("customer.schools.edit",{school:s.id}))}),null,16,["onClick"])]),_:2},1032,["text"]),r(f,{text:t.$t("Delete School")},{activator:a(({props:n})=>[r(h,p({variant:"plain",size:"small",icon:"mdi-delete-outline"},n,{onClick:$=>C(A)().showDialog(t.route("customer.schools.destroy",{school:s.id}))}),null,16,["onClick"])]),_:2},1032,["text"])])]))),128))])]),_:1})):d("",!0),r(F,null,{default:a(()=>[u.schools.data.length?d("",!0):(l(),i(j,{key:0})),r(L,{pagination:u.schools},null,8,["pagination"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","actions"])}}};export{ot as default};
