import{_ as I}from"./Pagination.68795be1.js";import{_ as z}from"./DataNotFound.61fd9276.js";import{r as T,aw as k,d as n,w as a,aO as R,H as w,b as L,o as r,V as _,e as b,av as t,g as e,c as d,ax as j,Y as c,f as o,l as m,m as p,D as v,bi as D,n as E,k as A,i as O,aS as G,bj as H,aT as U,a1 as Y}from"./app.88dbe7b3.js";import{V as q}from"./VRow.f135c61b.js";import{V as P}from"./VCol.2c4b1735.js";import{V as y}from"./VTooltip.4ad9cf0f.js";import{V as S}from"./VTable.86cf7a82.js";/* empty css              */const J={class:"mb-0"},K=t("th",null,"#",-1),M={class:"text-center"},Q={class:"text-center"},W={class:"text-center",width:"15%"},X={width:"5%"},Z={class:"text-center"},x={class:"text-center"},tt={class:"text-center"},et={class:"text-center"},lt={class:"text-center"},at={class:"text-center"},nt={colspan:"2"},st=["src"],ht={__name:"Index",props:{orders:{type:Object,default:null},schools:{type:Object,default:null}},setup(u){const B=u,V=Y("dateFormat"),C=T(!1),i=T(null),N=l=>{C.value=!0,i.value=B.orders.data.find(f=>f.id===l)};return(l,f)=>{const F=L("AppLayout");return r(),k(w,null,[n(F,{title:l.$t("Dashboard")},{default:a(()=>[n(q,{class:"match-height"},{default:a(()=>[n(P,{cols:"12",md:"6"},{default:a(()=>[n(_,null,{default:a(()=>[n(b,null,{default:a(()=>[t("h3",J,e(l.$t("Schools")),1),u.schools.data.length?(r(),d(S,{key:0},{default:a(()=>[t("thead",null,[t("tr",null,[K,t("th",null,e(l.$t("School Name")),1),t("th",null,e(l.$t("Domain")),1),t("th",M,e(l.$t("Database")),1),t("th",Q,e(l.$t("Status")),1),t("th",null,e(l.$t("Created At")),1),t("th",W,e(l.$t("Actions")),1)])]),t("tbody",null,[(r(!0),k(w,null,j(u.schools.data,(s,$)=>(r(),k("tr",{key:$},[t("td",X,e($+1),1),t("td",null,e(s.name),1),t("td",null,e(s.domain),1),t("td",Z,[s.database_created==1?(r(),d(c,{key:0,class:"ma-2",color:"primary"},{default:a(()=>[o(e(l.$t("Created")),1)]),_:1})):m("",!0),n(y,{text:l.$t("Click to refresh")},{activator:a(({props:h})=>[s.database_created==0?(r(),d(p,v({key:0,class:"ma-2",color:"secondary",rounded:"",size:"small"},h,{onClick:f[0]||(f[0]=g=>l.$inertia.reload())}),{default:a(()=>[o(e(l.$t("Creating"))+" ",1),n(D,{class:"ml-3",width:3,size:"x-small",color:"red",indeterminate:""})]),_:2},1040)):m("",!0)]),_:2},1032,["text"]),n(y,{text:l.$t("Click to retry")},{activator:a(({props:h})=>[s.database_created==2?(r(),d(p,v({key:0,class:"ma-2 text-white",color:"error",rounded:"",size:"small"},h,{onClick:g=>l.retryDatabaseCreation(s.id)}),{default:a(()=>[o(e(l.$t("Failed"))+" ",1),n(E,null,{default:a(()=>[o("mdi-reload")]),_:1})]),_:2},1040,["onClick"])):m("",!0)]),_:2},1032,["text"])]),t("td",x,[s.is_active?(r(),d(c,{key:0,class:"ma-2",color:"primary"},{default:a(()=>[o(e(l.$t("Active")),1)]),_:1})):m("",!0),s.is_active?m("",!0):(r(),d(c,{key:1,class:"ma-2",color:"secondary"},{default:a(()=>[o(e(l.$t("Inactive")),1)]),_:1}))]),t("td",null,e(A(V)(s.created_at)),1),t("td",tt,[n(y,{text:l.$t("Edit School")},{activator:a(({props:h})=>[n(p,v({variant:"plain",size:"small",icon:"mdi-clipboard-edit-outline"},h,{onClick:g=>l.$inertia.visit(l.route("customer.schools.edit",{school:s.id}))}),null,16,["onClick"])]),_:2},1032,["text"]),n(y,{text:l.$t("Delete School")},{activator:a(({props:h})=>[n(p,v({variant:"plain",size:"small",icon:"mdi-delete-outline"},h,{onClick:g=>l.useDeleteDialogStore().showDialog(l.route("customer.schools.destroy",{school:s.id}))}),null,16,["onClick"])]),_:2},1032,["text"])])]))),128))])]),_:1})):m("",!0),n(O,null,{default:a(()=>[u.schools.data.length?m("",!0):(r(),d(z,{key:0})),n(I,{pagination:u.schools},null,8,["pagination"])]),_:1})]),_:1})]),_:1})]),_:1}),n(P,{cols:"12",md:"6"},{default:a(()=>[n(_,null,{default:a(()=>[n(b,null,{default:a(()=>[o(e(l.$t("Orders")),1)]),_:1}),u.orders.data.length?(r(),d(S,{key:0,class:"table-rounded"},{default:a(()=>[t("thead",null,[t("tr",null,[t("th",null,e(l.$t("Order ID")),1),t("th",null,e(l.$t("Plan")),1),t("th",null,e(l.$t("Interval")),1),t("th",null,e(l.$t("Gateway")),1),t("th",et,e(l.$t("Status")),1),t("th",null,e(l.$t("Order At")),1),t("th",null,e(l.$t("Actions")),1)])]),t("tbody",null,[(r(!0),k(w,null,j(u.orders.data,s=>(r(),k("tr",{key:s.id},[t("td",null,e(s.id),1),t("td",null,e(s.plan.name),1),t("td",null,e(s.interval),1),t("td",null,e(s.gateway.name),1),t("td",lt,[s.status==0?(r(),d(c,{key:0,color:"warning",dark:""},{default:a(()=>[n(D,{width:"3",size:"x-small",class:"me-3",color:"warning",indeterminate:""}),o(" "+e(l.$t("Pending")),1)]),_:1})):s.status==1?(r(),d(c,{key:1,color:"primary",dark:"","prepend-icon":"mdi-check"},{default:a(()=>[o(e(l.$t("Accepted")),1)]),_:1})):(r(),d(c,{key:2,color:"error",dark:"","prepend-icon":"mdi-close"},{default:a(()=>[o(e(l.$t("Rejected")),1)]),_:1}))]),t("td",null,e(A(V)(s.created_at)),1),t("td",at,[n(y,{text:l.$t("View Details")},{activator:a(({props:$})=>[n(p,v({variant:"plain",size:"small",icon:"mdi-eye-outline"},$,{onClick:h=>N(s.id)}),null,16,["onClick"])]),_:2},1032,["text"])])]))),128))])]),_:1})):m("",!0),n(O,null,{default:a(()=>[u.orders.data.length?m("",!0):(r(),d(z,{key:0})),n(I,{pagination:u.orders},null,8,["pagination"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"]),n(R,{modelValue:C.value,"onUpdate:modelValue":f[2]||(f[2]=s=>C.value=s),"max-width":"500",persistent:""},{default:a(()=>[n(_,null,{default:a(()=>[n(G,null,{default:a(()=>[n(b,null,{default:a(()=>[o(e(l.$t("Order Details")),1)]),_:1})]),_:1}),n(O,null,{default:a(()=>[n(S,null,{default:a(()=>{var s,$;return[t("tbody",null,[t("tr",null,[t("td",null,e(l.$t("Order ID")),1),t("td",null,e(i.value.id),1)]),t("tr",null,[t("td",null,e(l.$t("Transaction ID")),1),t("td",null,e(i.value.trx_id),1)]),t("tr",null,[t("td",null,e(l.$t("Plan")),1),t("td",null,e((s=i.value.plan)==null?void 0:s.name),1)]),t("tr",null,[t("td",null,e(l.$t("Gateway")),1),t("td",null,e(($=i.value.gateway)==null?void 0:$.name),1)]),t("tr",null,[t("td",null,e(l.$t("Status")),1),t("td",null,[i.value.status==0?(r(),d(c,{key:0,color:"warning",dark:""},{default:a(()=>[n(D,{width:"3",size:"x-small",class:"me-3",color:"warning",indeterminate:""}),o(" "+e(l.$t("Pending")),1)]),_:1})):i.value.status==1?(r(),d(c,{key:1,color:"primary",dark:"","prepend-icon":"mdi-check"},{default:a(()=>[o(e(l.$t("Accepted")),1)]),_:1})):(r(),d(c,{key:2,color:"error",dark:"","prepend-icon":"mdi-close"},{default:a(()=>[o(e(l.$t("Rejected")),1)]),_:1}))])]),t("tr",null,[t("td",null,e(l.$t("Description")),1),t("td",null,e(i.value.description),1)]),t("tr",null,[t("td",null,e(l.$t("Order At")),1),t("td",null,e(A(V)(i.value.created_at)),1)]),t("tr",null,[t("td",nt,[n(H,{class:"pa-5"},{default:a(()=>[t("img",{src:i.value.screenshot,alt:""},null,8,st)]),_:1})])])])]}),_:1})]),_:1}),n(U,null,{default:a(()=>[n(p,{color:"primary",variant:"text",block:"",onClick:f[1]||(f[1]=s=>C.value=!1)},{default:a(()=>[o(e(l.$t("Close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{ht as default};
